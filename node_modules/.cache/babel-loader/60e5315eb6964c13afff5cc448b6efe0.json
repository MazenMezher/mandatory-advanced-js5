{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TG\\\\Desktop\\\\mandatory-advanced-js5\\\\src\\\\Components\\\\LogIn.js\";\nimport React, { Component } from 'react';\nimport { Dropbox } from \"dropbox\";\nimport { Redirect } from 'react-router-dom';\n\nclass LogIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.LogIn = () => {\n      let CLIENT_ID = '36rhe8urwdavjdu';\n      let dbx = new Dropbox({\n        clientId: CLIENT_ID\n      });\n      let LocalHost = 'http://localhost:3000/auth';\n      let authUrl = dbx.getAuthenticationUrl(LocalHost);\n      console.log(authUrl);\n      this.setState({\n        LoginDropBox: authUrl\n      });\n    };\n\n    this.state = {\n      LoginDropBox: '',\n      accessToken: false,\n      myToken: null,\n      tokenAvailable: false\n    };\n  }\n\n  componentDidMount() {\n    // get the token from localStorage\n    let token = localStorage.getItem('token');\n    console.log(token);\n\n    if (token) {\n      this.setState({\n        myToken: token,\n        tokenAvailable: true\n      });\n      console.log('Token is available');\n    } else {\n      this.setState({\n        myToken: null,\n        tokenAvailable: false\n      });\n      console.log('Token is unavailable');\n    }\n  }\n\n  render() {\n    const {\n      LoginDropBox,\n      tokenAvailable\n    } = this.state;\n    if (tokenAvailable) return React.createElement(Redirect, {\n      to: \"/main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.LogIn,\n      href: LoginDropBox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"Logga in\"));\n  }\n\n}\n\nexport default LogIn;","map":{"version":3,"sources":["C:/Users/TG/Desktop/mandatory-advanced-js5/src/Components/LogIn.js"],"names":["React","Component","Dropbox","Redirect","LogIn","constructor","props","CLIENT_ID","dbx","clientId","LocalHost","authUrl","getAuthenticationUrl","console","log","setState","LoginDropBox","state","accessToken","myToken","tokenAvailable","componentDidMount","token","localStorage","getItem","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,MAAMC,KAAN,SAAoBH,SAApB,CAA8B;AAC1BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA2BnBF,KA3BmB,GA2BX,MAAM;AAEV,UAAIG,SAAS,GAAG,iBAAhB;AAEA,UAAIC,GAAG,GAAG,IAAIN,OAAJ,CAAY;AAAEO,QAAAA,QAAQ,EAAEF;AAAZ,OAAZ,CAAV;AACA,UAAIG,SAAS,GAAG,4BAAhB;AACA,UAAIC,OAAO,GAAGH,GAAG,CAACI,oBAAJ,CAAyBF,SAAzB,CAAd;AAEAG,MAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AAEA,WAAKI,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAEL;AAAhB,OAAd;AACH,KAtCkB;;AAGf,SAAKM,KAAL,GAAa;AACTD,MAAAA,YAAY,EAAE,EADL;AAETE,MAAAA,WAAW,EAAE,KAFJ;AAITC,MAAAA,OAAO,EAAE,IAJA;AAKTC,MAAAA,cAAc,EAAE;AALP,KAAb;AAOH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB;AACA,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;;AAEA,QAAIA,KAAJ,EAAW;AACP,WAAKP,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAEG,KAAX;AAAkBF,QAAAA,cAAc,EAAE;AAAlC,OAAd;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACH,KAHD,MAIK;AACD,WAAKC,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,cAAc,EAAE;AAAjC,OAAd;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH;AACJ;;AAeDW,EAAAA,MAAM,GAAG;AACL,UAAM;AAAET,MAAAA,YAAF;AAAgBI,MAAAA;AAAhB,QAAmC,KAAKH,KAA9C;AAEA,QAAIG,cAAJ,EAAoB,OAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAEpB,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,OAAO,EAAE,KAAKhB,KAAjB;AAAwB,MAAA,IAAI,EAAEY,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,CADJ;AAKH;;AAnDyB;;AAsD9B,eAAeZ,KAAf","sourcesContent":["import React, { Component } from 'react'\n\nimport { Dropbox } from \"dropbox\";\nimport { Redirect } from 'react-router-dom';\n\nclass LogIn extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            LoginDropBox: '',\n            accessToken: false,\n\n            myToken: null,\n            tokenAvailable: false\n        }\n    }\n\n    componentDidMount() {\n        // get the token from localStorage\n        let token = localStorage.getItem('token');\n        console.log(token);\n\n        if (token) {\n            this.setState({ myToken: token, tokenAvailable: true });\n            console.log('Token is available');\n        }\n        else {\n            this.setState({ myToken: null, tokenAvailable: false });\n            console.log('Token is unavailable');\n        }\n    }\n\n    LogIn = () => {\n\n        let CLIENT_ID = '36rhe8urwdavjdu';\n\n        let dbx = new Dropbox({ clientId: CLIENT_ID });\n        let LocalHost = 'http://localhost:3000/auth';\n        let authUrl = dbx.getAuthenticationUrl(LocalHost);\n\n        console.log(authUrl);\n\n        this.setState({ LoginDropBox: authUrl});\n    }\n\n    render() {\n        const { LoginDropBox, tokenAvailable } = this.state;\n\n        if (tokenAvailable) return <Redirect to=\"/main\" />\n\n        return (\n            <div>\n                <a onClick={this.LogIn} href={LoginDropBox}>Logga in</a>\n            </div>\n        )\n    }\n}\n\nexport default LogIn\n"]},"metadata":{},"sourceType":"module"}