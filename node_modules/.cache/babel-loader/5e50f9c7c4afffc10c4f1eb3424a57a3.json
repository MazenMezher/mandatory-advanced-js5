{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TG\\\\Desktop\\\\mandatory-advanced-js5\\\\src\\\\Components\\\\LogIn.js\";\nimport React, { Component } from 'react';\nimport { Dropbox } from \"dropbox\";\nimport { Redirect } from 'react-router-dom'; // denna component låter oss logga in!\n\nclass LogIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.LogIn = () => {\n      let CLIENT_ID = 'f7m4wz025tph109';\n      let dbx = new Dropbox({\n        clientId: CLIENT_ID\n      });\n      let LocalHost = 'http://localhost:3000/auth';\n      let authUrl = dbx.getAuthenticationUrl(LocalHost);\n      this.setState({\n        LoginDropBox: authUrl\n      });\n    };\n\n    this.state = {\n      LoginDropBox: '',\n      accessToken: false,\n      tokenAvailable: false\n    };\n  }\n\n  componentDidMount() {\n    // hämtar token från localStorage\n    let token = localStorage.getItem('token');\n    console.log(token); // ifall token finns så vill vi uppdatera tokenAvailable så vi kan senare redirecta till /main\n\n    if (token) {\n      this.setState({\n        tokenAvailable: true\n      });\n      console.log('Token is available');\n    } else {\n      this.setState({\n        tokenAvailable: false\n      });\n      console.log('Token is unavailable');\n    }\n  } // Denna funktionen låter oss logga in\n\n\n  render() {\n    const {\n      LoginDropBox,\n      tokenAvailable\n    } = this.state;\n    if (tokenAvailable) return React.createElement(Redirect, {\n      to: \"/main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.LogIn,\n      href: LoginDropBox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Logga in\"));\n  }\n\n}\n\nexport default LogIn;","map":{"version":3,"sources":["C:/Users/TG/Desktop/mandatory-advanced-js5/src/Components/LogIn.js"],"names":["React","Component","Dropbox","Redirect","LogIn","constructor","props","CLIENT_ID","dbx","clientId","LocalHost","authUrl","getAuthenticationUrl","setState","LoginDropBox","state","accessToken","tokenAvailable","componentDidMount","token","localStorage","getItem","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB,C,CAEA;;AACA,MAAMC,KAAN,SAAoBH,SAApB,CAA8B;AAC1BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA2BnBF,KA3BmB,GA2BX,MAAM;AACV,UAAIG,SAAS,GAAG,iBAAhB;AAEA,UAAIC,GAAG,GAAG,IAAIN,OAAJ,CAAY;AAAEO,QAAAA,QAAQ,EAAEF;AAAZ,OAAZ,CAAV;AACA,UAAIG,SAAS,GAAG,4BAAhB;AACA,UAAIC,OAAO,GAAGH,GAAG,CAACI,oBAAJ,CAAyBF,SAAzB,CAAd;AAEA,WAAKG,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAEH;AAAhB,OAAd;AACH,KAnCkB;;AAGf,SAAKI,KAAL,GAAa;AACTD,MAAAA,YAAY,EAAE,EADL;AAETE,MAAAA,WAAW,EAAE,KAFJ;AAGTC,MAAAA,cAAc,EAAE;AAHP,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB;AACA,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ,EAHgB,CAKhB;;AACA,QAAIA,KAAJ,EAAW;AACP,WAAKN,QAAL,CAAc;AAAEI,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACH,KAHD,MAIK;AACD,WAAKV,QAAL,CAAc;AAAEI,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH;AACJ,GAzByB,CA2B1B;;;AAWAC,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEV,MAAAA,YAAF;AAAgBG,MAAAA;AAAhB,QAAmC,KAAKF,KAA9C;AAEA,QAAIE,cAAJ,EAAoB,OAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAEpB,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,OAAO,EAAE,KAAKb,KAAjB;AAAwB,MAAA,IAAI,EAAEU,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,CADJ;AAKH;;AAhDyB;;AAmD9B,eAAeV,KAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Dropbox } from \"dropbox\";\nimport { Redirect } from 'react-router-dom';\n\n// denna component låter oss logga in!\nclass LogIn extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            LoginDropBox: '',\n            accessToken: false,\n            tokenAvailable: false\n        }\n    }\n\n    componentDidMount() {\n        // hämtar token från localStorage\n        let token = localStorage.getItem('token');\n        console.log(token);\n\n        // ifall token finns så vill vi uppdatera tokenAvailable så vi kan senare redirecta till /main\n        if (token) {\n            this.setState({ tokenAvailable: true });\n            console.log('Token is available');\n        }\n        else {\n            this.setState({ tokenAvailable: false });\n            console.log('Token is unavailable');\n        }\n    }\n\n    // Denna funktionen låter oss logga in\n    LogIn = () => {\n        let CLIENT_ID = 'f7m4wz025tph109';\n\n        let dbx = new Dropbox({ clientId: CLIENT_ID });\n        let LocalHost = 'http://localhost:3000/auth';\n        let authUrl = dbx.getAuthenticationUrl(LocalHost);\n\n        this.setState({ LoginDropBox: authUrl});\n    }\n\n    render() {\n        const { LoginDropBox, tokenAvailable } = this.state;\n\n        if (tokenAvailable) return <Redirect to=\"/main\" />\n\n        return (\n            <div>\n                <a onClick={this.LogIn} href={LoginDropBox}>Logga in</a>\n            </div>\n        )\n    }\n}\n\nexport default LogIn"]},"metadata":{},"sourceType":"module"}