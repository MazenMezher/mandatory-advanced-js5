{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TG\\\\Desktop\\\\mandatory-advanced-js5\\\\src\\\\Components\\\\MoveWindow.js\";\nimport React, { Component, PureComponent } from 'react';\nimport '../Css/Options.css';\nimport '../Css/filefolder.css';\nimport ReactDom from 'react-dom';\nimport { Dropbox } from \"dropbox\";\nimport SelectFolder from './SelectFolder';\nimport RouterForMoveWindow from './RouterForMoveWindow';\n\nclass MoveWindow extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.setPath = current => {\n      console.log(current);\n      this.setState({\n        path: current\n      });\n    };\n\n    this.onClickRouting = route => {\n      this.setState({\n        path: route\n      });\n    };\n\n    this.moveToFolder = () => {\n      let path_display = this.props.path_display;\n      console.log(this.state.path);\n      path_display = path_display.split('/');\n      path_display = `/${path_display[path_display.length - 1]}`;\n      console.log(path_display);\n      this.dbx.filesMoveV2({\n        from_path: this.props.path_display,\n        to_path: `${this.state.path}${path_display}`\n      }).then(res => this.props.closeMoveWindow());\n    };\n\n    this.goBack = () => {\n      let path = this.state.path.split('/').filter(path => path !== \"\");\n      let newPath = path.reduce((acc, current, idx) => idx !== path.length - 1 ? acc + `/${current}` : acc + \"\", \"\");\n      this.setState({\n        path: newPath\n      });\n    };\n\n    this.state = {\n      path: \"\",\n      folders: [],\n      routing: []\n    };\n  }\n\n  componentDidMount() {\n    this.dbx = new Dropbox({\n      accessToken: localStorage.getItem(\"token\")\n    });\n    this.dbx.filesListFolder({\n      path: \"\"\n    }).then(response => {\n      this.setState({\n        folders: response.entries.filter(object => object[\".tag\"] === \"folder\")\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.path !== this.state.path) {\n      this.dbx.filesListFolder({\n        path: this.state.path\n      }).then(response => {\n        let pathArray = [];\n        let pathSplit = this.state.path.split('/').filter(path => path !== \"\").reduce((acc, current) => {\n          pathArray.push(acc + `/${current}`);\n          return acc + `/${current}`;\n        }, \"\");\n        this.setState({\n          folders: response.entries.filter(object => object[\".tag\"] === \"folder\"),\n          routing: pathArray\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      folders,\n      routing\n    } = this.state;\n    return ReactDom.createPortal(React.createElement(\"div\", {\n      className: \"moveWindow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Where do you want to move?\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"routing\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"start>\"), routing.map(route => React.createElement(RouterForMoveWindow, {\n      route: route,\n      onClickRouting: this.onClickRouting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }))), React.createElement(\"ul\", {\n      className: \"folderSelect\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, folders.map(folder => React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \" \", React.createElement(SelectFolder, {\n      folder: folder,\n      setPath: this.setPath,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.moveToFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"move to this folder\"), React.createElement(\"button\", {\n      onClick: this.props.closeMoveWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Go Back\"), React.createElement(\"button\", {\n      onClick: this.props.closeMoveWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"cancel\"))), document.querySelector('#MoveWindow'));\n  }\n\n}\n\nexport default MoveWindow;","map":{"version":3,"sources":["C:/Users/TG/Desktop/mandatory-advanced-js5/src/Components/MoveWindow.js"],"names":["React","Component","PureComponent","ReactDom","Dropbox","SelectFolder","RouterForMoveWindow","MoveWindow","constructor","props","setPath","current","console","log","setState","path","onClickRouting","route","moveToFolder","path_display","state","split","length","dbx","filesMoveV2","from_path","to_path","then","res","closeMoveWindow","goBack","filter","newPath","reduce","acc","idx","folders","routing","componentDidMount","accessToken","localStorage","getItem","filesListFolder","response","entries","object","componentDidUpdate","prevProps","prevState","pathArray","pathSplit","push","render","createPortal","marginBottom","map","folder","document","querySelector"],"mappings":"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","sourcesContent":["import React, { Component, PureComponent } from 'react'\nimport '../Css/Options.css'\nimport '../Css/filefolder.css'\nimport ReactDom from 'react-dom'\nimport { Dropbox } from \"dropbox\";\nimport SelectFolder from './SelectFolder'\nimport RouterForMoveWindow from './RouterForMoveWindow'\n\n\nclass MoveWindow extends PureComponent{\n  constructor(props){\n    super(props)\n    this.state = {\n      path: \"\",\n      folders: [],\n      routing: [],\n\n    }\n  }\n   setPath = (current) =>{\n     console.log(current)\n     this.setState({path: current })\n   }\n   onClickRouting = (route) =>{\n     this.setState({path:route})\n   }\n\n\n  componentDidMount(){\n    this.dbx = new Dropbox({ accessToken: localStorage.getItem(\"token\") });\n    this.dbx.filesListFolder({path:\"\"})\n    .then(response =>{\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" )})\n    })\n  }\n\n  componentDidUpdate(prevProps,prevState){\n    if(prevState.path !== this.state.path){\n    this.dbx.filesListFolder({path: this.state.path})\n    .then(response =>{\n      let pathArray = []\n      let pathSplit = this.state.path.split('/').filter(path => path !== \"\").reduce((acc, current) =>{\n        pathArray.push(acc+`/${current}`)\n        return acc+`/${current}`} ,\"\")\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" ), routing: pathArray})\n    })\n  }\n  }\n\n  moveToFolder = () =>{\n    let path_display = this.props.path_display\n    console.log(this.state.path)\n      path_display = path_display.split('/')\n      path_display = `/${path_display[path_display.length-1]}`\n\n    console.log(path_display)\n\n    this.dbx.filesMoveV2({\n      from_path: this.props.path_display,\n      to_path: `${this.state.path}${path_display}`\n    }).then(res => this.props.closeMoveWindow())\n  }\n  goBack = () =>{\n    let path = this.state.path.split('/').filter(path => path !== \"\")\n    let newPath = path.reduce((acc, current, idx ) =>( idx !== path.length-1 ? acc + `/${current}` : acc + \"\") , \"\")\n    this.setState({path: newPath})\n  }\n\n\n  render(){\n    const{folders,routing} = this.state\n\n  return ReactDom.createPortal(\n  <div className=\"moveWindow\">\n      <p style={{marginBottom: '10px'}}>Where do you want to move?</p>\n      <div>\n      <span className=\"routing\">start></span>\n      {routing.map(route =>(\n        <RouterForMoveWindow route={route} onClickRouting={this.onClickRouting}/>\n      ))}\n      </div>\n\n      <ul className=\"folderSelect\">\n        {folders.map(folder =>(\n          <li > <SelectFolder folder={folder} setPath={this.setPath}/></li>\n        ))}\n\n      </ul>\n      <div>\n        <button onClick={this.moveToFolder}>move to this folder</button>\n        <button onClick={this.props.closeMoveWindow}>Go Back</button>\n        <button onClick={this.props.closeMoveWindow}>cancel</button>\n\n      </div>\n\n  </div>\n  ,document.querySelector('#MoveWindow')\n\n)}}\n\n\n\nexport default MoveWindow\n"]},"metadata":{},"sourceType":"module"}