{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Motar\\\\Desktop\\\\Online\\\\mandatory-advanced-js5\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Motar\\\\Desktop\\\\Online\\\\mandatory-advanced-js5\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Motar\\\\Desktop\\\\Online\\\\mandatory-advanced-js5\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Motar\\\\Desktop\\\\Online\\\\mandatory-advanced-js5\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Motar\\\\Desktop\\\\Online\\\\mandatory-advanced-js5\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{PureComponent}from'react';import'../Css/Options.css';import'../Css/filefolder.css';import ReactDom from'react-dom';import{Dropbox}from\"dropbox\";import SelectFolder from'./SelectFolder';import RouterForMoveWindow from'./RouterForMoveWindow';// Denna komponenten renderar ut föstret när vi vill flytta folder/filer\nvar MoveWindow=/*#__PURE__*/function(_PureComponent){_inherits(MoveWindow,_PureComponent);function MoveWindow(props){var _this;_classCallCheck(this,MoveWindow);_this=_possibleConstructorReturn(this,_getPrototypeOf(MoveWindow).call(this,props));_this.setPath=function(current){console.log(current);_this.setState({path:current});};_this.onClickRouting=function(route){_this.setState({path:route});};_this.moveToFolder=function(){var path_display=_this.props.path_display;console.log(_this.state.path);path_display=path_display.split('/');path_display=\"/\".concat(path_display[path_display.length-1]);_this.dbx.filesMoveV2({from_path:_this.props.path_display,to_path:\"\".concat(_this.state.path).concat(path_display)}).then(function(res){return _this.props.closeMoveWindow();});};_this.goBack=function(){var path=_this.state.path.split('/').filter(function(path){return path!==\"\";});var newPath=path.reduce(function(acc,current,idx){return idx!==path.length-1?acc+\"/\".concat(current):acc+\"\";},\"\");_this.setState({path:newPath});};_this.toStart=function(){_this.setState({path:\"\"});};_this.state={path:\"\",folders:[],routing:[]};return _this;}_createClass(MoveWindow,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.dbx=new Dropbox({accessToken:localStorage.getItem(\"token\")});this.dbx.filesListFolder({path:\"\"}).then(function(response){_this2.setState({folders:response.entries.filter(function(object){return object[\".tag\"]===\"folder\";})});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(prevState.path!==this.state.path){this.dbx.filesListFolder({path:this.state.path}).then(function(response){var pathArray=[];var pathSplit=_this3.state.path.split('/').filter(function(path){return path!==\"\";}).reduce(function(acc,current){pathArray.push(acc+\"/\".concat(current));return acc+\"/\".concat(current);},\"\");_this3.setState({folders:response.entries.filter(function(object){return object[\".tag\"]===\"folder\";}),routing:pathArray});});}}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,folders=_this$state.folders,routing=_this$state.routing;return ReactDom.createPortal(React.createElement(\"div\",{className:\"moveWindow\"},React.createElement(\"p\",{style:{marginBottom:'10px'}},\"Where do you want to move?\"),React.createElement(\"div\",null,React.createElement(\"span\",{className:\"routing\",onClick:this.toStart},\"start>\"),routing.map(function(route){return React.createElement(RouterForMoveWindow,{route:route,onClickRouting:_this4.onClickRouting});})),React.createElement(\"ul\",{className:\"folderSelect\"},folders.map(function(folder){return React.createElement(\"li\",null,\" \",React.createElement(SelectFolder,{folder:folder,setPath:_this4.setPath}));})),React.createElement(\"div\",null,React.createElement(\"button\",{onClick:this.moveToFolder},\"move to this folder\"),React.createElement(\"button\",{onClick:this.goBack},\"Go Back\"),React.createElement(\"button\",{onClick:this.props.closeMoveWindow},\"cancel\"))),document.querySelector('#MoveWindow'));}}]);return MoveWindow;}(PureComponent);export default MoveWindow;","map":{"version":3,"sources":["C:/Users/Motar/Desktop/Online/mandatory-advanced-js5/src/Components/MoveWindow.js"],"names":["React","PureComponent","ReactDom","Dropbox","SelectFolder","RouterForMoveWindow","MoveWindow","props","setPath","current","console","log","setState","path","onClickRouting","route","moveToFolder","path_display","state","split","length","dbx","filesMoveV2","from_path","to_path","then","res","closeMoveWindow","goBack","filter","newPath","reduce","acc","idx","toStart","folders","routing","accessToken","localStorage","getItem","filesListFolder","response","entries","object","prevProps","prevState","pathArray","pathSplit","push","createPortal","marginBottom","map","folder","document","querySelector"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport '../Css/Options.css'\r\nimport '../Css/filefolder.css'\r\nimport ReactDom from 'react-dom'\r\nimport { Dropbox } from \"dropbox\";\r\nimport SelectFolder from './SelectFolder'\r\nimport RouterForMoveWindow from './RouterForMoveWindow'\r\n\r\n// Denna komponenten renderar ut föstret när vi vill flytta folder/filer\r\nclass MoveWindow extends PureComponent{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      path: \"\",\r\n      folders: [],\r\n      routing: [],\r\n    }\r\n  }\r\n\r\n  setPath = (current) =>{\r\n    console.log(current)\r\n    this.setState({path: current })\r\n  }\r\n\r\n  onClickRouting = (route) =>{\r\n    this.setState({path:route})\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.dbx = new Dropbox({ accessToken: localStorage.getItem(\"token\") });\r\n    this.dbx.filesListFolder({path:\"\"})\r\n    .then(response =>{\r\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" )})\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps,prevState){\r\n    if(prevState.path !== this.state.path){\r\n    this.dbx.filesListFolder({path: this.state.path})\r\n    .then(response =>{\r\n      let pathArray = []\r\n      let pathSplit = this.state.path.split('/').filter(path => path !== \"\").reduce((acc, current) =>{\r\n        pathArray.push(acc+`/${current}`)\r\n        return acc+`/${current}`} ,\"\")\r\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" ), routing: pathArray})\r\n    })\r\n  }\r\n  }\r\n\r\n  moveToFolder = () =>{\r\n    let path_display = this.props.path_display\r\n    console.log(this.state.path)\r\n      path_display = path_display.split('/')\r\n      path_display = `/${path_display[path_display.length-1]}`\r\n\r\n    this.dbx.filesMoveV2({\r\n      from_path: this.props.path_display,\r\n      to_path: `${this.state.path}${path_display}`\r\n    }).then(res => this.props.closeMoveWindow())\r\n  }\r\n\r\n  goBack = () =>{\r\n    let path = this.state.path.split('/').filter(path => path !== \"\")\r\n    let newPath = path.reduce((acc, current, idx ) =>( idx !== path.length-1 ? acc + `/${current}` : acc + \"\") , \"\")\r\n    this.setState({path: newPath})\r\n  }\r\n\r\n  toStart = () =>{\r\n    this.setState({path:\"\"})\r\n  }\r\n\r\n  render(){\r\n    const{folders,routing} = this.state\r\n\r\n    return ReactDom.createPortal(\r\n    <div className=\"moveWindow\">\r\n        <p style={{marginBottom: '10px'}}>Where do you want to move?</p>\r\n        <div>\r\n        <span className=\"routing\" onClick={this.toStart}>start></span>\r\n        {routing.map(route =>(\r\n          <RouterForMoveWindow route={route} onClickRouting={this.onClickRouting}/>\r\n        ))}\r\n        </div>\r\n\r\n        <ul className=\"folderSelect\">\r\n          {folders.map(folder =>(\r\n            <li > <SelectFolder folder={folder} setPath={this.setPath}/></li>\r\n          ))}\r\n\r\n        </ul>\r\n        <div>\r\n          <button onClick={this.moveToFolder}>move to this folder</button>\r\n          <button onClick={this.goBack}>Go Back</button>\r\n          <button onClick={this.props.closeMoveWindow}>cancel</button>\r\n        </div>\r\n    </div>\r\n    ,document.querySelector('#MoveWindow')\r\n)}}\r\n\r\nexport default MoveWindow"]},"metadata":{},"sourceType":"module"}