{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Motar\\\\Desktop\\\\mandatory-advanced-js5\\\\src\\\\Components\\\\MoveWindow.js\";\nimport React, { Component, PureComponent } from 'react';\nimport '../Css/Options.css';\nimport ReactDom from 'react-dom';\nimport { Dropbox } from \"dropbox\";\nimport SelectFolder from './SelectFolder';\n\nclass MoveWindow extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.setPath = current => {\n      console.log(current);\n      this.setState({\n        path: current\n      });\n    };\n\n    this.moveToFolder = () => {\n      let path_display = this.props.path_display;\n      console.log(this.state.path);\n      path_display = path_display.split('/');\n      path_display = `/${path_display[path_display.length - 1]}`;\n      console.log(path_display);\n      this.dbx.filesMoveV2({\n        from_path: this.props.path_display,\n        to_path: `${this.state.path}${path_display}`\n      }).then(res => this.props.closeMoveWindow());\n    };\n\n    this.state = {\n      path: \"\",\n      folders: []\n    };\n  }\n\n  componentDidMount() {\n    this.dbx = new Dropbox({\n      accessToken: localStorage.getItem(\"token\")\n    });\n    this.dbx.filesListFolder({\n      path: \"\"\n    }).then(response => {\n      this.setState({\n        folders: response.entries.filter(object => object[\".tag\"] === \"folder\")\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.path !== this.state.path) {\n      this.dbx.filesListFolder({\n        path: this.state.path\n      }).then(response => {\n        this.setState({\n          folders: response.entries.filter(object => object[\".tag\"] === \"folder\")\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      folders\n    } = this.state;\n    return ReactDom.createPortal(React.createElement(\"div\", {\n      className: \"moveWindow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Where do you want to move?\"), React.createElement(\"ul\", {\n      className: \"folderSelect\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, folders.map(folder => React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \" \", React.createElement(SelectFolder, {\n      folder: folder,\n      setPath: this.setPath,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.moveToFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"move to this folder\"), React.createElement(\"button\", {\n      onClick: this.props.closeMoveWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"cancel\"))), document.querySelector('#MoveWindow'));\n  }\n\n}\n\nexport default MoveWindow;","map":{"version":3,"sources":["C:/Users/Motar/Desktop/mandatory-advanced-js5/src/Components/MoveWindow.js"],"names":["React","Component","PureComponent","ReactDom","Dropbox","SelectFolder","MoveWindow","constructor","props","setPath","current","console","log","setState","path","moveToFolder","path_display","state","split","length","dbx","filesMoveV2","from_path","to_path","then","res","closeMoveWindow","folders","componentDidMount","accessToken","localStorage","getItem","filesListFolder","response","entries","filter","object","componentDidUpdate","prevProps","prevState","render","createPortal","marginBottom","map","folder","document","querySelector"],"mappings":"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","sourcesContent":["import React, { Component, PureComponent } from 'react'\r\nimport '../Css/Options.css'\r\nimport ReactDom from 'react-dom'\r\nimport { Dropbox } from \"dropbox\";\r\nimport SelectFolder from './SelectFolder'\r\n\r\n\r\nclass MoveWindow extends PureComponent{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      path: \"\",\r\n      folders: [],\r\n    }\r\n  }\r\n   setPath = (current) =>{\r\n     console.log(current)\r\n     this.setState({path: current })\r\n   }\r\n\r\n  \r\n  componentDidMount(){\r\n    this.dbx = new Dropbox({ accessToken: localStorage.getItem(\"token\") });\r\n    this.dbx.filesListFolder({path:\"\"})\r\n    .then(response =>{\r\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" )})\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps,prevState){\r\n    if(prevState.path !== this.state.path){\r\n    this.dbx.filesListFolder({path: this.state.path})\r\n    .then(response =>{\r\n      this.setState({folders: response.entries.filter(object => object[\".tag\"] ===\"folder\" )})\r\n    })\r\n  }\r\n  }\r\n  \r\n  moveToFolder = () =>{\r\n    let path_display = this.props.path_display\r\n    console.log(this.state.path)\r\n      path_display = path_display.split('/')\r\n      path_display = `/${path_display[path_display.length-1]}`\r\n    \r\n    console.log(path_display)\r\n\r\n    this.dbx.filesMoveV2({\r\n      from_path: this.props.path_display,\r\n      to_path: `${this.state.path}${path_display}`\r\n    }).then(res => this.props.closeMoveWindow())\r\n  } \r\n\r\n\r\n  render(){\r\n    const{folders} = this.state\r\n\r\n  return ReactDom.createPortal(\r\n  <div className=\"moveWindow\">\r\n      <p style={{marginBottom: '10px'}}>Where do you want to move?</p>\r\n      <ul className=\"folderSelect\">\r\n        {folders.map(folder =>(\r\n          <li > <SelectFolder folder={folder} setPath={this.setPath}/></li>\r\n        ))}\r\n\r\n      </ul>\r\n      <div>\r\n        <button onClick={this.moveToFolder}>move to this folder</button>\r\n        <button onClick={this.props.closeMoveWindow}>cancel</button>\r\n\r\n      </div>\r\n\r\n  </div>\r\n  ,document.querySelector('#MoveWindow')\r\n\r\n)}}\r\n\r\n\r\n\r\nexport default MoveWindow\r\n"]},"metadata":{},"sourceType":"module"}